# Proyecto: EcoBot Home Control - Asistente Inteligente de Hogar
# Autor: [Ignacio]
# DescripciÃ³n: Sistema de control y monitoreo de consumo energÃ©tico del hogar.

import time
from datetime import datetime

# Tarifa elÃ©ctrica (colones por kWh en Costa Rica)
TARIFA = 140  

# Base de datos de dispositivos inteligentes
dispositivos = {
    "televisor": {"consumo": 0.12, "horas": 0, "estado": "apagado"},
    "computadora": {"consumo": 0.25, "horas": 0, "estado": "apagado"},
    "consola de videojuegos": {"consumo": 0.20, "horas": 0, "estado": "apagado"},
    "luces inteligentes": {"consumo": 0.02, "horas": 0, "estado": "apagado"},
    "lavadora inteligente": {"consumo": 0.80, "horas": 0, "estado": "apagado"},
    "termostato inteligente": {"consumo": 0.30, "horas": 0, "estado": "apagado"},
    "refrigeradora": {"consumo": 1.20, "horas": 24, "estado": "encendido"}
}

def eco_say(texto):
    """Simula voz de asistente."""
    print("EcoBot:", texto)
    time.sleep(0.6)

def menu():
    print("\n===== ğŸ“¡ MENÃš PRINCIPAL - ECOBOT HOME CONTROL =====")
    print("1ï¸âƒ£ Encender dispositivo")
    print("2ï¸âƒ£ Apagar dispositivo")
    print("3ï¸âƒ£ Registrar horas de uso")
    print("4ï¸âƒ£ Ver reporte de consumo")
    print("5ï¸âƒ£ Recomendaciones ecolÃ³gicas")
    print("6ï¸âƒ£ Historial de actividades")
    print("7ï¸âƒ£ Salir\n")

# Historial de acciones
historial = []

# Funciones principales
def encender_dispositivo():
    nombre = input("ğŸ”Œ Dispositivo a encender: ").lower()
    if nombre in dispositivos:
        dispositivos[nombre]["estado"] = "encendido"
        eco_say(f"{nombre.capitalize()} encendido correctamente.")
        historial.append((datetime.now(), f"Encendido {nombre}"))
    else:
        eco_say("No encontrÃ© ese dispositivo.")

def apagar_dispositivo():
    nombre = input("ğŸ’¤ Dispositivo a apagar: ").lower()
    if nombre in dispositivos:
        dispositivos[nombre]["estado"] = "apagado"
        eco_say(f"{nombre.capitalize()} apagado.")
        historial.append((datetime.now(), f"Apagado {nombre}"))
    else:
        eco_say("No encontrÃ© ese dispositivo.")

def registrar_horas():
    eco_say("Registrando uso diario de dispositivos activos...")
    for nombre, datos in dispositivos.items():
        if datos["estado"] == "encendido":
            horas = float(input(f"â±ï¸ Â¿CuÃ¡ntas horas al dÃ­a usas el {nombre}? "))
            dispositivos[nombre]["horas"] = horas
    eco_say("Registro completado con Ã©xito.")
    historial.append((datetime.now(), "Registro de horas actualizado."))

def reporte_consumo():
    eco_say("Generando reporte de consumo energÃ©tico...")
    total_kwh = 0
    for nombre, datos in dispositivos.items():
        consumo = datos["consumo"] * datos["horas"]
        costo = consumo * TARIFA
        total_kwh += consumo
        estado = datos["estado"]
        print(f"{nombre.capitalize():25} {estado:10} {consumo:.2f} kWh | â‚¡{costo:.2f}")
    print("\nâš™ï¸ Total diario:", f"{total_kwh:.2f} kWh")
    print("ğŸ’° Costo diario:", f"â‚¡{total_kwh * TARIFA:.2f}")
    print("ğŸ’¸ Costo mensual:", f"â‚¡{total_kwh * TARIFA * 30:.2f}")
    historial.append((datetime.now(), "Reporte de consumo generado."))

def recomendaciones():
    eco_say("Analizando hÃ¡bitos de consumo...")
    for nombre, datos in dispositivos.items():
        if datos["estado"] == "encendido" and datos["horas"] > 5:
            print(f"ğŸ”¸ Reduce el uso del {nombre}, lo mantienes encendido demasiado tiempo.")
        elif datos["consumo"] > 0.5 and datos["estado"] == "encendido":
            print(f"ğŸ”¹ El {nombre} tiene un alto consumo, apÃ¡galo cuando no lo uses.")
    eco_say("Consejo: utiliza iluminaciÃ³n LED, desconecta consolas en modo reposo y ajusta el termostato entre 22-24Â°C.")
    historial.append((datetime.now(), "Recomendaciones generadas."))

def ver_historial():
    eco_say("Mostrando registro de actividades del sistema...")
    for fecha, accion in historial:
        print(f"{fecha.strftime('%d/%m %H:%M:%S')} â†’ {accion}")

# Programa principal
eco_say("Bienvenido a EcoBot Home Control ğŸ ")
eco_say("Sistema listo para administrar tu hogar inteligente de manera ecolÃ³gica.")

while True:
    menu()
    opcion = input("Selecciona una opciÃ³n: ").lower()

    if opcion in ["1", "encender"]:
        encender_dispositivo()
    elif opcion in ["2", "apagar"]:
        apagar_dispositivo()
    elif opcion in ["3", "registrar"]:
        registrar_horas()
    elif opcion in ["4", "reporte"]:
        reporte_consumo()
    elif opcion in ["5", "recomendaciones"]:
        recomendaciones()
    elif opcion in ["6", "historial"]:
        ver_historial()
    elif opcion in ["7", "salir"]:
        eco_say("Guardando datos... apagando el sistema EcoBot. ğŸŒ Hasta pronto.")
        break
    else:
        eco_say("Comando no reconocido. Intenta nuevamente.")
